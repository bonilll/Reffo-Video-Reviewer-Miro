
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="/assets/icon-192x192.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Miro Web SDK v2 -->
    <script src="https://miro.com/app/static/sdk/v2/miro.js"></script>
    <title>Reffo Reviewer</title>
    <meta name="description" content="Fast, focused video feedback for teams. Review, collaborate, and ship faster with Reffo Reviewer." />
    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js" defer></script>
  </head>
  <body class="antialiased">
    <script>
      (function() {
        try {
          var pref = localStorage.getItem('reffo:theme') || 'system';
          var dark = pref === 'dark' || (pref === 'system' && window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches);
          document.body.classList.add(dark ? 'theme-dark' : 'theme-light');
        } catch (e) {
          // default to light if anything goes wrong
          document.body.classList.add('theme-light');
        }
      })();
      // Miro SDK v2: register toolbar icon click to open the panel with our app
      (function() {
        try {
          if (window.miro && window.miro.board && window.miro.board.ui && typeof window.miro.board.ui.on === 'function') {
            (async () => {
              await window.miro.board.ui.on('icon:click', async () => {
                await window.miro.board.ui.openPanel({ url: '/', height: 560 });
              });
              console.log('Reffo Reviewer: Miro icon:click handler registered');
            })();
          }
        } catch (e) {
          // no-op outside Miro
        }
      })();
    </script>
    <div id="root"></div>
    <script type="module" src="/index.tsx"></script>
  </body>
</html>
